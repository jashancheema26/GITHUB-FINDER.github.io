<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GitHub Finder — Pro</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        /* STATS BOXES — PERFECT LIGHT + DARK MODE */

.stat {
    padding: 12px;
    border-radius: 12px;
    min-width: 100px;
    text-align: center;
    background: #e5e7eb;          /* Light mode */
    transition: 0.25s ease;
}

.stat strong {
    font-size: 20px;
    font-weight: 700;
    color: #000;
}

.stat .small {
    font-size: 13px;
    color: #475569;                 /* Light label */
}

/* DARK MODE FIX */
.dark .stat {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255,255,255,0.12);
    backdrop-filter: blur(6px);
}

.dark .stat strong {
    color: #f8fafc;
}

.dark .stat .small {
    color: #cbd5e1;                 /* Visible label in dark mode */
}

        /* PERFECT VISIT BUTTON (improved) */
        .repo .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 10px;
            text-decoration: none;
            transition: transform 0.22s ease, box-shadow 0.22s ease, background 0.22s ease, border-color 0.22s ease;
            height: 40px;
            line-height: 1;
            border: 1px solid transparent;
            box-shadow: 0 2px 6px rgba(16,24,40,0.04);
        }

        /* Primary visit style (default) */
        .repo .btn.primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-2));
            color: #fff;
            border-color: transparent;
        }

        .repo .btn.primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 22px rgba(59,130,246,0.12);
        }

        /* Ghost style for secondary (keeps good contrast) */
        .repo .btn.ghost {
            background: transparent;
            color: var(--muted);
            border-color: rgba(0,0,0,0.06);
            backdrop-filter: none;
        }

        .dark .repo .btn.ghost {
            color: #f8fafc;
            border-color: rgba(255,255,255,0.12);
            background: rgba(255,255,255,0.02);
            backdrop-filter: blur(4px);
        }

        .repo .btn.ghost:hover {
            transform: translateY(-3px);
            background: rgba(0,0,0,0.04);
        }

        /* -------------------------------------------- */
        /*                LIGHT THEME DEFAULT           */
        /* -------------------------------------------- */
        :root{
            --bg1: #ffffff;
            --bg2: #f3f4f6;
            --card: rgba(0,0,0,0.05);
            --glass: rgba(0,0,0,0.08);
            --accent: #4f46e5;
            --accent-2: #06b6d4;
            --muted: #475569;
            --success: #059669;
            --danger: #ef4444;
            color-scheme: light;
        }

        /* -------------------------------------------- */
        /*           PROFESSIONAL DARK THEME            */
        /* -------------------------------------------- */
        .dark{
            --bg1: #0d1117;
            --bg2: #161b22;
            --card: rgba(255,255,255,0.04);
            --glass: rgba(255,255,255,0.08);
            --accent: #3b82f6;
            --accent-2: #0ea5e9;
            --muted: #cbd5e1;
            --success: #10b981;
            --danger: #ef4444;
            color-scheme: dark;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .dark .card,
        .dark .panel{
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(8px);
        }

        .dark input.search{
            background: rgba(255,255,255,0.07);
            color: #e2e8f0;
        }
        .dark input.search::placeholder{
            color: #64748b;
        }

        /* Fix ALL dark text issues */
        .dark h1,
        .dark h2,
        .dark h3,
        .dark h4,
        .dark h5,
        .dark h6,
        .dark p,
        .dark .small,
        .dark .brand h1,
        .dark .topbar div,
        .dark #historyList div {
            color: #e5e7eb !important;
        }

        /* -------------------------------------------- */
        /*    FIX RECENT SEARCH CHIPS (Perfect UI)      */
        /* -------------------------------------------- */
        .chip {
            padding: 8px 12px;
            border-radius: 999px;
            font-size: 14px;
            display:inline-block;
            cursor:pointer;
            transition: 0.25s ease;
            border:none;
        }

        /* Light Mode Chips */
        body.light .chip {
            background: #e5e7eb;
            color: #1e293b;
        }
        body.light .chip:hover {
            background: #d1d5db;
            transform: translateY(-2px);
        }

        /* Dark Mode Chips */
        .dark .chip {
            background: rgba(255,255,255,0.06) !important;
            border: 1px solid rgba(255,255,255,0.12) !important;
            color: #e5e7eb !important;
            backdrop-filter: blur(4px);
        }
        .dark .chip:hover {
            background: rgba(255,255,255,0.14) !important;
            transform: translateY(-2px);
        }

        /* -------------------------------------------- */
        /*     FIX DARK MODE REPO CARDS (FINAL FIX)     */
        /* -------------------------------------------- */
        .dark .repo {
            background: rgba(255,255,255,0.06) !important;
            border: 1px solid rgba(255,255,255,0.12) !important;
            backdrop-filter: blur(6px);
            color: #e5e7eb !important;
            transition: 0.25s ease;
        }

        .dark .repo h3 {
            color: #f8fafc !important;
            font-weight: 600;
        }

        .dark .repo p {
            color: #cbd5e1 !important;
        }

        .dark .repo .btn.primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-2)) !important;
            color: #f8fafc !important;
            border-color: transparent !important;
        }

        .dark .repo:hover {
            background: rgba(255,255,255,0.12) !important;
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }

        /* -------------------------------------------- */
        /*                GENERAL UI                     */
        /* -------------------------------------------- */

        *{box-sizing:border-box}
        body{
            margin:0;
            min-height:100vh;
            font-family:Poppins,system-ui;
            background: var(--bg1);
            display:flex;
            align-items:center;
            justify-content:center;
            padding:28px;
            transition: background 0.4s ease, color 0.3s ease;
        }

        .app{ width:100%; max-width:980px; display:grid; grid-template-columns:380px 1fr; gap:24px; }

        .panel{
            background:var(--card); padding:22px; border-radius:16px;
            border:1px solid var(--glass);
        }

        .brand{display:flex; gap:12px; align-items:center}
        .brand img{width:48px; height:48px; border-radius:10px;}

        input.search{
            flex:1; padding:12px 14px; border-radius:10px; border:none;
            background:#e2e8f0; color:#1e293b; font-size:15px
        }

        .btn{
            padding:10px 12px; border-radius:10px; border:none; cursor:pointer;
            background:linear-gradient(90deg,var(--accent),var(--accent-2));
            color:white; font-weight:600
        }
        .btn.ghost{
            background:#e5e7eb; color:#1e293b;
        }

        .small{font-size:13px; color:var(--muted)}

        .main{display:flex; flex-direction:column; gap:16px}
        .card{background:var(--card); padding:18px; border-radius:14px; border:1px solid var(--glass);}

        .topbar{display:flex; justify-content:space-between; align-items:center;}

        .profile{display:grid; grid-template-columns:120px 1fr; gap:18px}
        .avatar-lg{width:120px;height:120px;border-radius:14px; object-fit:cover}

        .stats{display:flex; gap:12px; margin-top:12px}
        .stat{
            padding:10px; border-radius:10px; background:#e2e8f0;
            min-width:100px; text-align:center
        }

        .repo-list{margin-top:12px; display:grid; gap:10px}
        .repo{
            padding:12px; border-radius:10px; display:flex;
            justify-content:space-between; align-items:center; gap:14px;
            background:#f1f5f9;
            border:1px solid #e2e8f0;
        }

        .repo h3{ margin:0 0 6px 0; font-size:16px }
        .repo p{ margin:0; color:var(--muted); font-size:13px; max-width:70ch; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

        .empty{padding:40px; text-align:center; color:var(--muted)}

        @media(max-width:900px){ .app{grid-template-columns:1fr;} .profile{grid-template-columns:1fr} .avatar-lg{width:100px;height:100px} .repo p{white-space:normal} }

    </style>
</head>

<body class="light">

<div class="app">

    <!-- LEFT PANEL -->
    <div class="panel">
        <div class="brand">
           <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" 
     width="48" height="48" style="border-radius:10px;">
            <div>
                <h1>GitHub Finder</h1>
                <div class="small">Search users, view profile & repos</div>
            </div>
        </div>

        <div class="controls">
            <div class="search-row" style="display:flex;gap:10px;">
                <input class="search" id="username" placeholder="Search GitHub username...">
                <button class="btn" id="searchBtn">Search</button>
            </div>

            <div style="display:flex; gap:8px; margin-top:10px">
                <button class="btn ghost" id="clearHistory">Clear History</button>
                <button class="btn ghost" id="refreshBtn">Refresh</button>
            </div>

            <div class="history" style="margin-top:12px">
                <h4 class="small">Recent searches</h4>
                <div id="historyList"></div>
            </div>
        </div>
    </div>

    <!-- RIGHT SIDE -->
    <div class="main">

        <div class="card topbar">
            <div>
                <div style="font-size:14px; color:var(--muted)">Results</div>
                <div style="font-weight:600">Live user information from GitHub API</div>
            </div>

            <button class="btn ghost" id="themeBtn">Dark</button>
        </div>

        <div id="outputArea" class="card">
            <div class="empty">
                <div style="font-size:18px; margin-bottom:10px">Start by searching a GitHub username</div>
                <div class="small">You will see profile info, stats and repositories.</div>
            </div>
        </div>

    </div>

</div>

<script>

// FETCH USER ----------
async function getUser(username) {
    const output = document.getElementById("outputArea");
    output.innerHTML = `<div class="empty">Loading...</div>`;

    try {
        const res = await fetch(`https://api.github.com/users/${username}`);
        const data = await res.json();

        if (data.message === "Not Found") {
            output.innerHTML = `<div class="empty">❌ User not found</div>`;
            return;
        }

        const repoRes = await fetch(data.repos_url);
        const repos = await repoRes.json();

        let repoHTML = "";
        repos.slice(0, 6).forEach(r => {
            // decide button style: use primary for public repos
            repoHTML += `
                <div class="repo">
                    <div style="flex:1; min-width:0;">
                        <h3 title="${escapeHtml(r.name)}">${escapeHtml(r.name)}</h3>
                        <p title="${escapeHtml(r.description || '')}">${escapeHtml(r.description || "No description")}</p>
                    </div>
                    <div style="flex-shrink:0;">
                        <a href="${r.html_url}" target="_blank" rel="noopener noreferrer" class="btn primary" aria-label="Visit ${escapeHtml(r.name)}">Visit</a>
                    </div>
                </div>
            `;
        });

        output.innerHTML = `
            <div class="profile">
                <img class="avatar-lg" src="${data.avatar_url}" alt="${escapeHtml(data.login)}'s avatar" />
                <div class="meta">
                    <h2>${escapeHtml(data.name || "No Name")}</h2>
                    <div class="small">@${escapeHtml(data.login)}</div>
                    <p>${escapeHtml(data.bio || "No bio available")}</p>

                    <div class="stats">
                        <div class="stat"><strong>${data.followers}</strong><div class="small">Followers</div></div>
                        <div class="stat"><strong>${data.following}</strong><div class="small">Following</div></div>
                        <div class="stat"><strong>${data.public_repos}</strong><div class="small">Repos</div></div>
                    </div>
                </div>
            </div>

            <h3 style="margin-top:14px">Repositories</h3>
            <div class="repo-list">${repoHTML}</div>
        `;
    }
    catch (e) {
        console.error(e);
        output.innerHTML = `<div class="empty">⚠ API Request Failed</div>`;
    }
}

// small helper to escape user content
function escapeHtml(s) {
    return String(s || '').replace(/[&<>"']/g, function (m) {
        return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[m];
    });
}

// SEARCH
document.getElementById("searchBtn").addEventListener("click", () => {
    const username = document.getElementById("username").value.trim();
    if (username) {
        saveHistory(username);
        getUser(username);
    }
});

// ENTER KEY
document.getElementById("username").addEventListener("keypress", (e) => {
    if (e.key === "Enter") document.getElementById("searchBtn").click();
});

// SAVE HISTORY
function saveHistory(name) {
    let list = JSON.parse(localStorage.getItem("history") || "[]");

    if (!list.includes(name)) {
        list.unshift(name);
        if (list.length > 8) list.pop();
    }

    localStorage.setItem("history", JSON.stringify(list));
    loadHistory();
}

// LOAD HISTORY
function loadHistory() {
    const area = document.getElementById("historyList");
    const list = JSON.parse(localStorage.getItem("history") || "[]");
    area.innerHTML = "";

    list.forEach(u => {
        const chip = document.createElement("div");
        chip.className = "chip";
        chip.textContent = u;
        chip.onclick = () => {
            document.getElementById("username").value = u;
            getUser(u);
        };
        area.appendChild(chip);
    });
}
loadHistory();

// CLEAR
document.getElementById("clearHistory").addEventListener("click", () => {
    localStorage.removeItem("history");
    loadHistory();
});

// REFRESH
document.getElementById("refreshBtn").addEventListener("click", () => {
    document.getElementById("username").value = "";
    document.getElementById("outputArea").innerHTML = `
        <div class="empty">
            <div style="font-size:18px; margin-bottom:10px">Start by searching a GitHub username</div>
            <div class="small">You will see profile info, stats and repos.</div>
        </div>`;
});

// THEME BUTTON ----------
const themeBtn = document.getElementById("themeBtn");

(function () {
    const saved = localStorage.getItem("theme") || "light";

    if (saved === "dark") {
        document.body.classList.add("dark");
        themeBtn.textContent = "Light";
    }
})();

themeBtn.addEventListener("click", () => {
    const isDark = document.body.classList.toggle("dark");

    if (isDark) {
        themeBtn.textContent = "Light";
        localStorage.setItem("theme", "dark");
    } else {
        themeBtn.textContent = "Dark";
        localStorage.setItem("theme", "light");
    }
});

</script>

</body>
</html>
